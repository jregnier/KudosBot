<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Roulette</title>

    <!-- Atlassian User Interface CSS -->
    <link href="//aui-cdn.atlassian.com/aui-hipchat/0.1.2/css/aui-hipchat.min.css" rel="stylesheet" type="text/css" media="all"
    />

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

    <!-- Atlassian User Interface JS - this must be after jquery -->
    <script src="//aui-cdn.atlassian.com/aui-hipchat/0.1.2/js/aui-hipchat.min.js"></script>

    <!-- Add-on specific CSS -->
    <link rel="stylesheet" href="/css/addon.css" type="text/css" />

    <!--The HipChat Javascript API -->
    <script src="//www.hipchat.com/atlassian-connect/all.js"></script>

    <!-- Add-on Javascript functions -->
    <script src="/js/addon.js"></script>
    <script src="/js/Winwheel.js"></script>
    <script src="/js/greensock-js/TweenMax.min.js"></script>
</head>

<body>
    <section class="aui-connect-page aui-connect-page-focused" role="main">
        <section class="aui-connect-content">
            <div class="aui-connect-content-inner">
                <div id="rouletteContainer">
                    <div id="canvasContainer">
                        <canvas id="rouletteCanvas" width="400" height="400">
                            canvas not supported!
                        </canvas>
                    </div>
                    <input class="button" type="button" value="Spin!" onclick="spinWheel()"></button>
                    <script>
                        var theWheel = new Winwheel({
                            'canvasId': 'rouletteCanvas',
                            'numSegments': 8,         // Number of segments
                            'outerRadius': 150,       // The size of the wheel.
                            'innerRadius': 70,
                            'centerX': 200,       // Used to position on the background correctly.
                            'centerY': 200,
                            'textFontSize': 15,        // Font size.
                            'segments':            // Definition of all the segments.
                            [
                                { 'fillStyle': '#eae56f', 'text': 'Prize 1' },
                                { 'fillStyle': '#89f26e', 'text': 'Prize 2' },
                                { 'fillStyle': '#7de6ef', 'text': 'Prize 3' },
                                { 'fillStyle': '#e7706f', 'text': 'Prize 4' },
                                { 'fillStyle': '#eae56f', 'text': 'Prize 5' },
                                { 'fillStyle': '#89f26e', 'text': 'Prize 6' },
                                { 'fillStyle': '#7de6ef', 'text': 'Prize 7' },
                                { 'fillStyle': '#e7706f', 'text': 'Prize 8' }
                            ],
                            'animation':               // Definition of the animation
                            {
                                'type': 'spinToStop',
                                'duration': 5,
                                'spins': 8,
                                'callbackFinished': 'alertPrize()'
                            }
                        });

                        var isSpinning = false;

                        function spinWheel() {
                            if (isSpinning == false) {
                                theWheel.startAnimation();
                                isSpinning = true;
                            }
                        }

                        function alertPrize() {
                            alert('winner');
                            isSpinning = false;
                        }
                    </script>
                </div>
            </div>
        </section>
    </section>
</body>

</html>